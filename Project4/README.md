# Project4: SM3å“ˆå¸Œç®—æ³•å®ç°ä¸ä¼˜åŒ–

## ğŸ“ é¡¹ç›®ç»“æ„

```
Project4/
â”œâ”€â”€ core/                    # æ ¸å¿ƒSM3å®ç°
â”‚   â”œâ”€â”€ sm3_basic.c         # åŸºæœ¬SM3å®ç°
â”‚   â”œâ”€â”€ sm3_optimized.c     # ä¼˜åŒ–SM3å®ç°
â”‚   â””â”€â”€ sm3_simd.c          # SIMDä¼˜åŒ–å®ç°
â”œâ”€â”€ attacks/                 # æ”»å‡»ç›¸å…³å®ç°
â”‚   â””â”€â”€ sm3_length_extension.c  # é•¿åº¦æ‰©å±•æ”»å‡»
â”œâ”€â”€ merkle/                  # Merkleæ ‘å®ç°
â”‚   â””â”€â”€ sm3_merkle.c        # RFC6962 Merkleæ ‘
â”œâ”€â”€ utils/                   # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ sm3_utils.c         # é€šç”¨å·¥å…·å‡½æ•°
â”œâ”€â”€ src/                     # ä¸»ç¨‹åº
â”‚   â””â”€â”€ main.c              # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ tests/                   # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ test_sm3_basic.c    # åŸºæœ¬åŠŸèƒ½æµ‹è¯•
â”‚   â”œâ”€â”€ test_length_extension.c  # é•¿åº¦æ‰©å±•æ”»å‡»æµ‹è¯•
â”‚   â”œâ”€â”€ test_merkle_tree.c  # Merkleæ ‘æµ‹è¯•
â”‚   â””â”€â”€ test_performance.c  # æ€§èƒ½æµ‹è¯•
â”œâ”€â”€ examples/                # ç¤ºä¾‹ç¨‹åº
â”‚   â”œâ”€â”€ basic_hash_example.c
â”‚   â”œâ”€â”€ length_extension_example.c
â”‚   â””â”€â”€ merkle_tree_example.c
â”œâ”€â”€ include/                 # å¤´æ–‡ä»¶
â”‚   â””â”€â”€ sm3.h              # SM3æ¥å£å®šä¹‰
â””â”€â”€ docs/                   # æ–‡æ¡£
```

## ğŸ¯ é¡¹ç›®è¦æ±‚å®Œæˆæƒ…å†µ

### âœ… a) SM3è½¯ä»¶å®ç°æ•ˆç‡æ”¹è¿›
- **åŸºæœ¬å®ç°** (`core/sm3_basic.c`) - æ ‡å‡†SM3å®ç°
- **ä¼˜åŒ–å®ç°** (`core/sm3_optimized.c`) - æ€§èƒ½ä¼˜åŒ–ç‰ˆæœ¬
- **SIMDå®ç°** (`core/sm3_simd.c`) - SIMDæŒ‡ä»¤ä¼˜åŒ–
- **æ€§èƒ½å¯¹æ¯”**: SIMDå®ç°æœ€å¿« (209.24 MB/s)

### âœ… b) Length-Extension AttackéªŒè¯
- **æ”»å‡»å®ç°** (`attacks/sm3_length_extension.c`) - æˆåŠŸå®ç°SM3é•¿åº¦æ‰©å±•æ”»å‡»
- **æ”»å‡»æ•ˆç‡**: æ¯”æ­£å¸¸è®¡ç®—å¿«8.9%
- **æµ‹è¯•è¦†ç›–**: å¤šç§æ¶ˆæ¯å’Œæ‰©å±•ç»„åˆæµ‹è¯•

### âœ… c) åŸºäºSM3çš„Merkleæ ‘ (RFC6962)
- **10ä¸‡å¶å­èŠ‚ç‚¹**: æˆåŠŸæ„å»ºå¤§è§„æ¨¡Merkleæ ‘
- **å­˜åœ¨æ€§è¯æ˜**: éªŒè¯æˆåŠŸï¼Œè¯æ˜åˆ›å»º<1ms
- **ä¸å­˜åœ¨æ€§è¯æ˜**: éªŒè¯æˆåŠŸ
- **æ€§èƒ½ä¼˜ç§€**: æ„å»ºæ—¶é—´0.07ç§’ï¼Œè¯æ˜éªŒè¯<1ms

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¼–è¯‘é¡¹ç›®
```bash
make clean
make all
```

### è¿è¡Œå®Œæ•´æµ‹è¯•
```bash
make test-all
```

### è¿è¡Œå•ä¸ªæµ‹è¯•
```bash
make test-basic              # åŸºæœ¬SM3åŠŸèƒ½æµ‹è¯•
make test-length-extension   # é•¿åº¦æ‰©å±•æ”»å‡»æµ‹è¯•
make test-merkle            # Merkleæ ‘æµ‹è¯•
make test-performance       # æ€§èƒ½æµ‹è¯•
```

### è¿è¡Œç¤ºä¾‹ç¨‹åº
```bash
make run-examples
```

## ğŸ“Š æ€§èƒ½æµ‹è¯•ç»“æœ

### SM3å“ˆå¸Œæ€§èƒ½
- **SIMDå®ç°**: 46.67 å¾®ç§’/æ¬¡ (209.24 MB/s) - æœ€å¿«
- **åŸºæœ¬å®ç°**: 48.70 å¾®ç§’/æ¬¡ (200.55 MB/s)
- **ä¼˜åŒ–ç‰ˆå®ç°**: 50.57 å¾®ç§’/æ¬¡ (193.11 MB/s)

### é•¿åº¦æ‰©å±•æ”»å‡»æ€§èƒ½
- **æ”»å‡»æ•ˆç‡**: æ¯”æ­£å¸¸è®¡ç®—å¿«8.9%
- **æµ‹è¯•è¦†ç›–**: 100%æˆåŠŸç‡

### Merkleæ ‘æ€§èƒ½ (10ä¸‡å¶å­èŠ‚ç‚¹)
- **å¶å­å“ˆå¸Œç”Ÿæˆ**: 0.04ç§’
- **Merkleæ ‘æ„å»º**: 0.07ç§’
- **å­˜åœ¨æ€§è¯æ˜**: <1msåˆ›å»ºï¼Œ<1mséªŒè¯
- **ä¸å­˜åœ¨æ€§è¯æ˜**: <1msåˆ›å»ºï¼Œ<1mséªŒè¯

## ğŸ—ï¸ æŠ€æœ¯å®ç°

### SM3æ ¸å¿ƒç®—æ³•
- åŸºäºå›½å¯†æ ‡å‡†SM3
- æ”¯æŒåŸºæœ¬ã€ä¼˜åŒ–ã€SIMDä¸‰ç§å®ç°
- å®Œæ•´çš„æµ‹è¯•å‘é‡éªŒè¯

### é•¿åº¦æ‰©å±•æ”»å‡»
- åˆ©ç”¨SM3çš„Merkle-DamgÃ¥rdç»“æ„
- æ— éœ€åŸå§‹æ¶ˆæ¯å³å¯æ‰©å±•å“ˆå¸Œ
- éªŒè¯äº†SM3çš„è„†å¼±æ€§

### Merkleæ ‘ (RFC6962)
- æ”¯æŒ10ä¸‡å¶å­èŠ‚ç‚¹
- å­˜åœ¨æ€§å’Œä¸å­˜åœ¨æ€§è¯æ˜
- é«˜æ•ˆçš„å†…å­˜ç®¡ç†å’Œæ€§èƒ½ä¼˜åŒ–

## ğŸ“ æ–‡ä»¶è¯´æ˜

### æ ¸å¿ƒå®ç°
- `core/sm3_basic.c`: æ ‡å‡†SM3å®ç°ï¼Œæ˜“äºç†è§£
- `core/sm3_optimized.c`: æ€§èƒ½ä¼˜åŒ–ç‰ˆæœ¬
- `core/sm3_simd.c`: SIMDæŒ‡ä»¤ä¼˜åŒ–ç‰ˆæœ¬

### æ”»å‡»å®ç°
- `attacks/sm3_length_extension.c`: é•¿åº¦æ‰©å±•æ”»å‡»å®ç°

### Merkleæ ‘å®ç°
- `merkle/sm3_merkle.c`: RFC6962æ ‡å‡†Merkleæ ‘å®ç°

### å·¥å…·å‡½æ•°
- `utils/sm3_utils.c`: é€šç”¨å·¥å…·å‡½æ•°å’Œè¾…åŠ©åŠŸèƒ½

## ğŸ§ª æµ‹è¯•è¦†ç›–

### åŸºæœ¬åŠŸèƒ½æµ‹è¯•
- ç©ºå­—ç¬¦ä¸²ã€å•å­—ç¬¦ã€çŸ­æ¶ˆæ¯ã€é•¿æ¶ˆæ¯
- åŸºæœ¬å®ç°å’Œä¼˜åŒ–å®ç°å¯¹æ¯”
- ä¸OpenSSL SM3å®ç°ç»“æœä¸€è‡´

### é•¿åº¦æ‰©å±•æ”»å‡»æµ‹è¯•
- å¤šç§æ¶ˆæ¯å’Œæ‰©å±•ç»„åˆ
- æ”»å‡»æˆåŠŸç‡éªŒè¯
- æ€§èƒ½å¯¹æ¯”æµ‹è¯•

### Merkleæ ‘æµ‹è¯•
- å°è§„æ¨¡æµ‹è¯• (8èŠ‚ç‚¹)
- ä¸­è§„æ¨¡æµ‹è¯• (1000èŠ‚ç‚¹)
- å¤§è§„æ¨¡æµ‹è¯• (10000èŠ‚ç‚¹)
- è¶…å¤§è§„æ¨¡æµ‹è¯• (100000èŠ‚ç‚¹)
- å­˜åœ¨æ€§å’Œä¸å­˜åœ¨æ€§è¯æ˜

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### SM3å®ç°ä¼˜åŒ–
1. **åŸºæœ¬å®ç°**: æ ‡å‡†ç®—æ³•å®ç°
2. **ä¼˜åŒ–å®ç°**: å¾ªç¯å±•å¼€ã€å¸¸é‡ä¼˜åŒ–
3. **SIMDå®ç°**: å‘é‡åŒ–æŒ‡ä»¤ä¼˜åŒ–

### Merkleæ ‘ä¼˜åŒ–
1. **å†…å­˜ç®¡ç†**: é«˜æ•ˆçš„å†…å­˜åˆ†é…å’Œé‡Šæ”¾
2. **è¯æ˜ä¼˜åŒ–**: å¿«é€Ÿè¯æ˜ç”Ÿæˆå’ŒéªŒè¯
3. **æ ‘ç»“æ„**: ä¼˜åŒ–çš„æ ‘æ„å»ºç®—æ³•

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›é¡¹ç›®ã€‚ 

